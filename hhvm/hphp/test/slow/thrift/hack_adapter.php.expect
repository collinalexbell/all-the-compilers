--- binary ---
object(OuterStruct) (4) {
  ["value"]=>
  string(2) "42"
  ["nested"]=>
  object(HackStruct) (1) {
    ["str_value"]=>
    string(4) "1337"
  }
  ["vec"]=>
  vec(2) {
    object(HackStruct) (1) {
      ["str_value"]=>
      string(4) "2020"
    }
    object(HackStruct) (1) {
      ["str_value"]=>
      string(2) "-1"
    }
  }
  ["unset"]=>
  NULL
}
string(32) "3773f6721bceccbc1eae35d64309f78d"
object(OuterStruct) (4) {
  ["value"]=>
  string(2) "42"
  ["nested"]=>
  object(HackStruct) (1) {
    ["str_value"]=>
    string(4) "1337"
  }
  ["vec"]=>
  vec(2) {
    object(HackStruct) (1) {
      ["str_value"]=>
      string(4) "2020"
    }
    object(HackStruct) (1) {
      ["str_value"]=>
      string(2) "-1"
    }
  }
  ["unset"]=>
  NULL
}
object(OuterStructNoAdapter) (4) {
  ["value"]=>
  int(42)
  ["nested"]=>
  object(ThriftStruct) (1) {
    ["int_value"]=>
    int(1337)
  }
  ["vec"]=>
  vec(2) {
    object(ThriftStruct) (1) {
      ["int_value"]=>
      int(2020)
    }
    object(ThriftStruct) (1) {
      ["int_value"]=>
      int(-1)
    }
  }
  ["unset"]=>
  NULL
}
--- compact ---
object(OuterStruct) (4) {
  ["value"]=>
  string(2) "42"
  ["nested"]=>
  object(HackStruct) (1) {
    ["str_value"]=>
    string(4) "1337"
  }
  ["vec"]=>
  vec(2) {
    object(HackStruct) (1) {
      ["str_value"]=>
      string(4) "2020"
    }
    object(HackStruct) (1) {
      ["str_value"]=>
      string(2) "-1"
    }
  }
  ["unset"]=>
  NULL
}
string(32) "cf4e0cab24c0706eeed0f090d2fd86af"
object(OuterStruct) (4) {
  ["value"]=>
  string(2) "42"
  ["nested"]=>
  object(HackStruct) (1) {
    ["str_value"]=>
    string(4) "1337"
  }
  ["vec"]=>
  vec(2) {
    object(HackStruct) (1) {
      ["str_value"]=>
      string(4) "2020"
    }
    object(HackStruct) (1) {
      ["str_value"]=>
      string(2) "-1"
    }
  }
  ["unset"]=>
  NULL
}
object(OuterStructNoAdapter) (4) {
  ["value"]=>
  int(42)
  ["nested"]=>
  object(ThriftStruct) (1) {
    ["int_value"]=>
    int(1337)
  }
  ["vec"]=>
  vec(2) {
    object(ThriftStruct) (1) {
      ["int_value"]=>
      int(2020)
    }
    object(ThriftStruct) (1) {
      ["int_value"]=>
      int(-1)
    }
  }
  ["unset"]=>
  NULL
}